<html>
<head>
    <meta charset="utf-8"/>
    <title>Chart.js demo</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/0.2.0/Chart.min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <style>
    canvas{
        -moz-user-select: none;
        -webkit-user-select: none;
        -ms-user-select: none;
    },
    body    { padding-top:50px; }
    </style>
</head>
<body class="container">

    <header>
        <% include header %>
    </header>
    
    <h1>Temperatures in <%=city.name %></h1>
    
    
    <canvas id="myChart" width="800" height="600"></canvas>
    <script>
    var temps = new Array();
    var times = new Array();
    //populate data for the plotting
    <% city.temps.forEach(function(temp){ %>
        temps.push(<%= temp.temp %>);
        times.push(<%= temp.time %>);
    <% }); %>
    var data = {
        labels: times,
        datasets: [
        {
                label: "Temperatures",
                fillColor: "rgba(151,187,205,0.2)",
                strokeColor: "rgba(151,187,205,1)",
                pointColor: "rgba(151,187,205,1)",
                pointStrokeColor: "#fff",
                pointHighlightFill: "#fff",
                pointHighlightStroke: "rgba(151,187,205,1)",
                data: temps
            }
        ],
        
    }

    var ctx = new Chart(document.getElementById("myChart").getContext("2d")).Line(data); 
    </script>
</body>

</html>
